# ludics harness configuration (private repo)

state_repo: lukstafi/self-improve
state_path: harness

slots:
  count: 6

projects:
  - name: ocannl
    repo: lukstafi/ocannl
    issues: true

  - name: ppx-minidebug
    repo: lukstafi/ppx_minidebug
    issues: true

  - name: agent-duo
    repo: lukstafi/agent-duo
    issues: true

  - name: personal
    repo: lukstafi/self-improve
    issues: true

adapters:
  agent-duo:
    enabled: true
  claude-code:
    enabled: true
  claude-ai:
    enabled: true

# Mag: Autonomous coordinator (Claude Opus 4.5 in Claude Code)
mag:
  enabled: true
  backend: tmux-ttyd
  session: ludics-mag
  ttyd_port: 7679

  autonomy_level:
    analyze_issues: auto
    elaborate_tasks: auto
    infer_dependencies: auto
    suggest_priorities: suggest
    assign_to_slots: manual
    start_sessions: manual

  schedule:
    briefing: "08:00"
    health_check: "every 4h"
    analyze_repos: "on_change"

# Three-tier notification system
notifications:
  provider: ntfy

  topics:
    pai: lukstafi-pai
    agents: lukstafi-agents
    public: lukstafi-public

  priorities:
    briefing: 3
    health_check: 3
    deadline_7days: 4
    deadline_3days: 5
    critical_alert: 5

  public_filter:
    auto_publish:
      - release_completed
      - paper_accepted
      - talk_accepted

    never_publish:
      - debugging_info
      - private_deadlines
      - internal_tasks
      - slot_states

triggers:
  startup:
    enabled: true
    action: mag briefing

  sync:
    enabled: true
    interval: 3600
    action: tasks sync

  morning:
    enabled: true
    hour: 8
    minute: 0
    action: mag briefing

  health:
    enabled: true
    interval: 14400
    action: mag health-check

  watch:
    - paths:
        - ~/repos/ocannl/README.md
      action: tasks sync

  # Federation heartbeat (for multi-machine Mag setup)
  federation:
    enabled: false
    interval: 300
    action: federation tick

# Network settings for multi-machine access via Tailscale
network:
  # Mode: localhost (default) | tailscale
  mode: localhost

  # Explicit hostname override (optional)
  # If not set and mode is tailscale, auto-detects from `tailscale status`
  hostname: ""

  # Node definitions for federation (seniority order: first = highest priority)
  # The highest-seniority online node becomes Mag leader
  nodes: []
  # Example:
  #   - name: mac-mini
  #     tailscale_hostname: mac-mini.tailnet-name.ts.net
  #   - name: macbook
  #     tailscale_hostname: macbook.tailnet-name.ts.net
